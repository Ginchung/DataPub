# 计算机技术：MPI依赖库的安装

> Create 2023-01-30 想安装SISSO了

## 基建
我的办公室电脑是OSX，因此对于MacOS，首先是安装Homebrew包管理器。

国内参考清华镜像源的教程：https://mirrors.tuna.tsinghua.edu.cn/help/homebrew/

## 常用框架介绍

### OpenMPI
是开源的MPI技术。跟它类似的有个叫MPICH的技术框架。运行以下命令，等机器自动运转即可：
* `brew install openmpi`

安装完这个框架之后，就有了mpifort、mpif90、mpif77之流的默认命令了。

⚠️注意：mpiifort跟mpifort看着一个`i`之差，虽然在代码层面上差异确实只在少数，但是如果不懂如何修改代码。那我奉劝你还是抓紧看Intel OneAPI篇——mpiifort依赖的是Intel家为自己打造的并行库。

## MPICH
也是一个经典框架。
* https://www.mpich.org/downloads/
* https://formulae.brew.sh/formula/mpich

## Intel OneAPI

我是从下面这篇文章介绍的Intel OneAPI才打开intel网站的。

文章：
* https://www.scivision.dev/intel-oneapi-macos-mpi/
  * https://www.intel.com/content/www/us/en/developer/tools/oneapi/hpc-toolkit-download.html?operatingsystem=mac&distributions=offline
  * https://www.intel.com/content/www/us/en/developer/tools/oneapi/base-toolkit-download.html?operatingsystem=mac&distributions=online

**存在的问题**：

* intel不支持在OSX/MacOS上安装intel家的mpi
  * 也就是说，很多已经写完的依赖intel库的fortran程序，无法编译成功
* 那当然，AMD的CPU在Intel的框架下，当然也没有任何发挥价值。就跟CUDA没法在AMD显卡上运行一样——AMD只能疯狂激励开源社区对自己的支持了，否则科学计算界对于算力的要求是很高的，这块的生意比较难抢

**解决方法**：
1. 装虚拟机：VirtualBox或VM Ware之流
2. 换电脑，用Windows或者Linux都可
